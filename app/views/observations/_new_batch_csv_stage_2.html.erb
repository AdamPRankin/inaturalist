<% unless @hasInvalid %>
<div id="batchformcol" class="column span-24">
  <%= render(:partial => 'batch_form_row') %>
</div>
<% end %>
<% form_tag(
  {:controller => 'observations', :action => 'create'}, 
  :class => 'observationform') do %>

  <% unless @hasInvalid %>
    <div class="column span-24 headers">
      <div class="column span-1">
        &nbsp;
      </div>
      <div class="column span-7">
        <label>What</label>
      </div>
      <div class="column span-7">
        <label>When</label>
      </div>
      <div class="last column span-7">
        <label>Where</label>
      </div>
    </div>
    <div id="batchcol">
      <%= render :partial => 'observations/observation_form_field_rows' %>
    </div>
    <div class="column span-24">
      <div id="observation_form_links" class="buttonrow">
        <%= submit_tag "Save All", :class => 'default button' -%>
      </div>
    </div>
  <% else %>
    <div class="column span-24 headers">
        There were some problems with your CSV file. 
        Please revise the failed rows. Of course the problem could always be 
        on our side. If that is the case, please let us know.
    </div>
    <%= render :partial => 'observations/observation_csv_parse_errors' %>
    <div class="column span-24">
      <div id="observation_form_links" class="buttonrow">
        <%= link_to "Back to Import", :action => 'import' -%>
      </div>
    </div>
  <% end %>
<% end %>
