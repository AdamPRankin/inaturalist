<%- show_user ||= false
-%>
try {
  var msg = document.getElementById('inatwidgetmsg');
  <% if @observations.size >= 1 -%>
    if (msg) {
      msg.style.visibility = 'visible';
    }
  <% else %>
    if (msg) {
      msg.style.visibility = 'hidden';
    }
  <% end %>
  
  <% if params[:layout] == 'small' %>
    document.write('<%= escape_javascript(render(:partial => "widget_small.html", :locals => {:show_user => show_user, :default_image => params[:default_image]}).gsub(/\n\s*/, '')) %>')
  <% else %>
    document.write('<%= escape_javascript(render(:partial => "widget.html", :locals => {:show_user => show_user, :default_image => params[:default_image]}).gsub(/\n\s*/, '')) %>')
  <% end %>
} catch (e) {}
