<%- content_for(:extrajs) do -%>
  <script type="text/javascript" charset="utf-8">
    // $(document).ready(function() {
    //   $('#taxon_name_lexicon').autocomplete()
    // });
  </script>
<%- end -%>
<% form_for(@taxon_name, 
    :url => @taxon_name.new_record? ? taxon_taxon_names_path(@taxon || @taxon_name.taxon) : @taxon_name) do |n| %>
  <%= error_messages_for :taxon_name %>
  
  <%= n.hidden_field :taxon_id %>
  
  <% unless @taxon_name.source_identifier.blank? -%>
    <div class="clear quiet box right">
      <div class="description">
        This taxon name was originally imported from an external name provider:
      </div>
      <p class="ui">
        <%= n.label :name_provider %><br/>
        <%= n.text_field :name_provider, :disabled => true %>
      </p>

      <p class="ui">
        <%= n.label :source_url %><br/>
        <%= n.text_field :source_url, :disabled => true %>
      </p>
      <p class="ui">
        <%= n.label :source_identifier %><br/>
        <%= n.text_field :source_identifier, :disabled => true %>
      </p>
    </div>
  <%- end -%>
  
  <p class="ui">
    <%= n.label :name %><br/>
    <%= n.text_field :name %>
  </p>
  <p class="ui">
    <%= n.label :lexicon %><br/>
    <%#= n.text_field :lexicon %>
    <%= n.select :lexicon, 
      options_for_select(TaxonName::DEFAULT_LEXICONS, 
        :selected => @taxon_name.new_record? ? TaxonName::LEXICONS[:ENGLISH] : nil) +
      options_for_select(['---------------------------'], :disabled => '---------------------------') +
      options_for_select(TaxonName::LEXICONS.values.sort, 
        :selected => @taxon_name.new_record? ? nil : @taxon_name.lexicon)
    %>
  </p>
  <p class="ui" style="margin: 20px 0">
    <%= label_tag 'If this is a scientific name, is it currently accepted?' %><br/>
    <%= n.radio_button :is_valid, true.to_s %> <%= n.label :is_valid_true, 'True' %>
    <%= n.radio_button :is_valid, false %>  <%= n.label :is_valid_false, 'False' %>
  </p>
  
  <div class="clear buttonrow">
    <%= n.submit "Save", :class => 'default button' %>
    <%= link_to "Cancel", @taxon || @taxon_name.taxon, :class => 'button' %>
    <%- unless @taxon_name.new_record? -%>
      <%= link_to 'Delete', taxon_name_path(@taxon, @taxon_name),
                  :method => :delete,
                  :confirm => "Are you sure you want to delete this name?",
                  :class => 'minor delete button' %>
    <%- end -%>
  </div>
<% end %>