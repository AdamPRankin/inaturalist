<%- show_user ||= false
  thelayout ||= :large -%>
try {
  var msg = document.getElementById('inatwidgetmsg');
  <% if @observations.size >= 1 -%>
    if (msg) {
      msg.style.visibility = 'visible';
    }
  <% else %>
    if (msg) {
      msg.style.visibility = 'hidden';
    }
  <% end %>
  <% if( thelayout == 'large' ) %>  
    document.write('<%= escape_javascript(render(:partial => "widget.html", :locals => {:show_user => show_user}).gsub(/\n\s*/, '')) %>')
  <% else %>
    document.write('<%= escape_javascript(render(:partial => "widget_small.html", :locals => {:show_user => show_user}).gsub(/\n\s*/, '')) %>')
  <% end %>
} catch (e) {}
