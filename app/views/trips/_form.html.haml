= content_for :extracss do
  = stylesheet_link_tag "trips/form"
= content_for :extrajs do
  %script{:type => "text/javascript", :src => "http://maps.google.com/maps/api/js?sensor=false"}
  = javascript_include_tag 'jquery/plugins/jquery.labelize', 
                           'jquery/plugins/jquery.dataTables.min', 
                           "jquery/plugins/inat/datepicker.js",
                           :cocoon,
                           "jquery/plugins/jquery.latLonSelector.js",
                           "trips/form"
= form_for @trip, :builder => DefaultFormBuilder, :html => {:class => 'trip_form'} do |f|
  .row
    .span6
      = f.text_field :title, :class => "span6"
      .row-fluid
        .span6= f.text_field :start_time, :label => false, :placeholder => t(:start_time, :default => "Start time")
        .span6= f.text_field :stop_time, :label => false, :placeholder => t(:end_time, :default => "End time")
      = f.text_area :body, :class => "span6", :label => t(:description), :placeholder => t(:describe_your_trip, :default => "Describe your trip!")
    #location.span6
      .stacked
        = f.text_field :place_id, :class => "span6", :label => t(:location), :placeholder => t(:start_typing_place_name)
      .stacked
        = text_field_tag :location, '', :class => "text span6", :placeholder => "Search the map"
      .map.stacked
        map goes here
      .coordinates.row-fluid
        .span4= f.text_field :latitude, :label => t(:lat), :class => "span12"
        .span4= f.text_field :longitude, :label => t(:lon), :class => "span12"
        .span4= f.text_field :positional_accuracy, :label => t(:acc), :class => "span12"
  .row
    .span12
      %h3=t :purposes
      #trip_purposes.stacked.clearfix
        = f.fields_for :trip_purposes do |tp|
          = render "trip_purpose_fields", :f => tp
      = link_to_add_association t(:add_trip_purpose), f, :trip_purposes, "data-association-insertion-method" => "append", "data-association-insertion-node" => "#trip_purposes", :class => "btn btn-small btn-success"
  #trip_taxa_row.row.stacked
    .span12
      %h3=t :taxa
      %table.stacked
        %thead
          %tr
            %th.observed Observed?
            %th.name Name
            %th
        %tbody#trip_taxa
          = f.fields_for :trip_taxa do |tt|
            = render "trip_taxon_fields", :f => tt
      .hide
        = link_to_add_association t(:add_trip_taxon), f, :trip_taxa, "data-association-insertion-method" => "append", "data-association-insertion-node" => "#trip_taxa"
      %label=t :add_a_species
      = text_field_tag :new_species, '', :class => 'span6', :placeholder => t(:start_typing_taxon_name)
  #actions.row
    .span12
      = f.submit t(:save_trip), :class => "btn btn-primary"
      = link_to t(:cancel), :back, :class => "btn"
      = link_to t(:delete), @trip, :method => :delete, :confirm => t(:are_you_sure?), :class => "btn btn-danger pull-right"
